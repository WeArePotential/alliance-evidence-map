(function(t){function e(e){for(var i,r,o=e[0],l=e[1],c=e[2],d=0,h=[];d<o.length;d++)r=o[d],s[r]&&h.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},s={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("64a9"),s=n.n(i);s.a},"1bfc":function(t,e,n){"use strict";var i=n("ee6e"),s=n.n(i);s.a},"3b9b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("6b54"),n("cadf"),n("551c"),n("097d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sans-serif",attrs:{id:"app"}},[n("Sidebar",{attrs:{width:t.sidebarWidth,outcomeInterventionLU:t.filteredOutcomeInterventionLU,selectedCell:t.selectedCell,studiesLU:t.studiesLU,studies:t.studies,filters:t.filters,emphasiseChange:t.emphasiseChange,action:t.action}}),n("ScrollingEvidenceTable",{attrs:{interventions:t.interventions,interventionGroups:t.interventionGroups,outcomes:t.outcomes,outcomeGroups:t.outcomeGroups,outcomeInterventionLU:t.filteredOutcomeInterventionLU,action:t.action,sidebarWidth:t.sidebarWidth,maxStudies:t.maxStudies,selectedCell:t.selectedCell}})],1)},a=[],r=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scrollable-table",style:{marginLeft:t.sidebarWidth+"px"}},[n("div",{staticClass:"fixed-corner",style:{left:t.sidebarWidth+"px",width:t.leftHeaderWidth+"px",height:t.topHeaderHeight+"px"}},[n("svg",{attrs:{width:t.leftHeaderWidth,height:t.topHeaderHeight}},[n("g",{attrs:{transform:"translate(5, 160)"}},[n("g",{attrs:{transform:"translate(0, 0)"}},[n("rect",{staticStyle:{fill:"#23844e",opacity:"0.3"},attrs:{x:"12.658227848101262",width:"24.050632911392405",y:"-10",height:"10"}}),n("rect",{staticStyle:{fill:"#23844e",opacity:"0.6"},attrs:{x:"37.974683544303794",width:"24.050632911392405",y:"-27.428571428571427",height:"27.428571428571427"}}),n("rect",{staticStyle:{fill:"#23844e",opacity:"1"},attrs:{x:"63.291139240506325",width:"24.050632911392405",y:"-4.571428571428571",height:"4.571428571428571"}}),n("line",{attrs:{x1:"10",x2:"90"}}),n("rect",{staticStyle:{fill:"#e52e78",opacity:"0.3"},attrs:{x:"12.658227848101262",width:"24.050632911392405",y:"0",height:"14.571428571428571"}}),n("rect",{staticStyle:{fill:"#e52e78",opacity:"0.6"},attrs:{x:"37.974683544303794",width:"24.050632911392405",y:"0",height:"19.142857142857142"}}),n("rect",{staticStyle:{fill:"#e52e78",opacity:"1"},attrs:{x:"63.291139240506325",width:"24.050632911392405",y:"0",height:"8"}})]),n("g",{attrs:{fill:"#23844e",transform:"translate(0, -18)"}},[n("text",{attrs:{x:"95"}},[t._v("Evidence supporting")]),n("text",{attrs:{x:"95",y:"13"}},[t._v("the intervention")])]),n("g",{attrs:{fill:"#e52e78",transform:"translate(0, 15)"}},[n("text",{attrs:{x:"95"}},[t._v("Evidence not supporting")]),n("text",{attrs:{x:"95",y:"13"}},[t._v("the intervention")])]),n("g",{attrs:{transform:"translate(28,-40)"}},[n("text",{staticStyle:{opacity:"0.4"},attrs:{transform:"rotate(-90)"}},[t._v("Low quality evidence")])]),n("g",{attrs:{transform:"translate(54,-40)"}},[n("text",{staticStyle:{opacity:"0.7"},attrs:{transform:"rotate(-90)"}},[t._v("Moderate quality")])]),n("g",{attrs:{transform:"translate(80,-40)"}},[n("text",{attrs:{transform:"rotate(-90)"}},[t._v("High quality evidence")])])])])]),n("div",{staticClass:"fixed-row",style:{left:t.sidebarWidth+"px"}},[n("div",{staticClass:"headers"},t._l(t.interventionHeaders,function(e){return n("div",{staticClass:"header-container",style:{left:-t.innerOffsetX+e.x+"px"}},[n("svg",{attrs:{height:t.categoryWidth,width:e.size-3}},[n("text",{attrs:{transform:"translate("+.5*e.size+", 18)"}},[t._v(t._s(e.label))]),n("title",[t._v(t._s(e.name))])])])})),n("div",{staticClass:"interventions"},t._l(t.groupedInterventions,function(e,i){return n("div",{staticClass:"fixed-row-cell",style:{left:-t.innerOffsetX+t.leftHeaderWidth+i*t.cellWidth+"px",top:t.categoryWidth+"px",width:t.cellWidth+"px",height:t.topHeaderHeight-t.categoryWidth+"px",backgroundColor:t.selectedCell.intervention===e?"#999":null}},[n("div",{staticClass:"b"},[t._v(t._s(e))])])}))]),n("div",{staticClass:"fixed-col",style:{left:t.sidebarWidth+"px"}},[n("div",{staticClass:"headers"},t._l(t.outcomeHeaders,function(e){return n("div",{staticClass:"header-container",style:{top:-t.innerOffsetY+e.y+"px"}},[n("svg",{attrs:{width:t.categoryWidth,height:e.size-3}},[n("text",{attrs:{transform:"rotate(-90)translate("+-.5*e.size+", 18)"}},[t._v(t._s(e.name))]),n("title",[t._v(t._s(e.name))])])])})),n("div",{staticClass:"outcomes"},t._l(t.groupedOutcomes,function(e,i){return n("div",{staticClass:"fixed-col-cell",style:{top:-t.innerOffsetY+t.topHeaderHeight+i*t.cellHeight+"px",left:t.categoryWidth+"px",width:t.leftHeaderWidth-t.categoryWidth+"px",height:t.cellHeight+"px",backgroundColor:t.selectedCell.outcome===e?"#ddd":null}},[n("div",{staticClass:"b"},[t._v(t._s(e))])])}))]),n("div",{staticClass:"grid-wrapper"},[n("div",{staticClass:"grid-inner",style:{left:t.leftHeaderWidth+"px",top:t.topHeaderHeight+"px"}},[t.outcomeGroups.length>0?n("svg",{attrs:{width:t.numCols*t.cellWidth,height:t.numRows*t.cellHeight},on:{click:function(e){t.action("selectCell",{outcome:null,intervention:null})}}},[n("g",{staticClass:"cells"},t._l(t.groupedOutcomes,function(e,i){return n("g",{attrs:{transform:"translate(0, "+i*t.cellHeight+")"}},t._l(t.groupedInterventions,function(i,s){return n("g",{attrs:{transform:"translate("+s*t.cellWidth+", 0)"},on:{click:function(n){n.stopPropagation(),t.action("selectCell",{outcome:e,intervention:i})}}},[n("Barchart",{attrs:{data:t.outcomeInterventionLU[e][i],width:t.cellWidth,height:t.cellHeight,maxStudies:t.maxStudies,selected:t.selectedCell.outcome===e&&t.selectedCell.intervention===i}})],1)}))})),n("g",{staticClass:"grid-lines"},[t._l(t.groupedOutcomes,function(e,i){return n("g",{attrs:{transform:"translate(0, "+i*t.cellHeight+")"}},[n("line",{staticClass:"grid-line",attrs:{x2:t.numCols*t.cellWidth}})])}),t._l(t.groupedInterventions,function(e,i){return n("g",{attrs:{transform:"translate("+i*t.cellWidth+")"}},[n("line",{staticClass:"grid-line",attrs:{y2:t.numRows*t.cellHeight}})])})],2)]):t._e()])])])}),o=[],l=(n("7f7f"),n("c5f6"),n("2f9b"),n("d9fb"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("rect",{staticClass:"background",style:{fill:t.selected?"#ddd":null},attrs:{width:t.width,height:t.height}}),t.nonZero?n("g",{staticClass:"cell"},[n("g",{attrs:{transform:"translate(0, "+.5*t.height+")"}},[t._l(t.positiveBars,function(t){return n("rect",{style:{fill:"#23844e",opacity:t.opacity},attrs:{x:t.x,width:t.width,y:t.y,height:t.height}})}),n("line",{attrs:{x1:"10",x2:t.width-10}}),t._l(t.negativeBars,function(t){return n("rect",{style:{fill:"#e52e78",opacity:t.opacity},attrs:{x:t.x,width:t.width,y:t.y,height:t.height}})})],2)]):t._e()])}),c=[],u=n("e236"),d={name:"Barchart",props:{data:Object,width:Number,height:Number,maxStudies:Number,selected:Boolean},computed:{nonZero:function(){return this.data.for.low.length+this.data.for.moderate.length+this.data.for.high.length+this.data.against.low.length+this.data.against.moderate.length+this.data.against.high.length>0},positiveBars:function(){var t=Object(u["b"])().domain([0,this.maxStudies]).range([0,.4*this.height]),e=Object(u["a"])().domain([0,1,2]).range([0,this.width]).paddingInner(.05).paddingOuter(.5);return[{x:e(0),width:e.bandwidth(),y:-t(this.data.for.low.length),height:t(this.data.for.low.length),opacity:.3},{x:e(1),width:e.bandwidth(),y:-t(this.data.for.moderate.length),height:t(this.data.for.moderate.length),opacity:.6},{x:e(2),width:e.bandwidth(),y:-t(this.data.for.high.length),height:t(this.data.for.high.length),opacity:1}]},negativeBars:function(){var t=Object(u["b"])().domain([0,this.maxStudies]).range([0,.4*this.height]),e=Object(u["a"])().domain([0,1,2]).range([0,this.width]).paddingInner(.05).paddingOuter(.5);return[{x:e(0),width:e.bandwidth(),y:0,height:t(this.data.against.low.length),opacity:.3},{x:e(1),width:e.bandwidth(),y:0,height:t(this.data.against.moderate.length),opacity:.6},{x:e(2),width:e.bandwidth(),y:0,height:t(this.data.against.high.length),opacity:1}]}}},h=d,f=(n("1bfc"),n("2877")),v=Object(f["a"])(h,l,c,!1,null,"08840312",null);v.options.__file="Barchart.vue";var p=v.exports,g={name:"ScrollingEvidenceTable",components:{Barchart:p},props:{outcomes:Array,interventions:Array,interventionGroups:Array,outcomeGroups:Array,outcomeInterventionLU:Object,action:Function,sidebarWidth:Number,maxStudies:Number,selectedCell:Object},data:function(){return{topHeaderHeight:200,leftHeaderWidth:240,categoryWidth:28,innerOffsetX:0,innerOffsetY:0,cellWidth:100,cellHeight:80}},computed:{numRows:function(){return this.outcomes?this.outcomes.length:0},numCols:function(){return this.interventions.length},outcomeHeaders:function(){var t=this,e=this.topHeaderHeight,n=[];return this.outcomeGroups.forEach(function(i){var s=i.size*t.cellHeight;n.push({name:i.name.toUpperCase(),size:s,y:e}),e+=s}),n},groupedOutcomes:function(){var t=[];return this.outcomeGroups.forEach(function(e){t=t.concat(e.items)}),t},interventionHeaders:function(){var t=this,e=this.leftHeaderWidth,n=[];return this.interventionGroups.forEach(function(i){var s=i.size*t.cellWidth,a=i.name.toUpperCase(),r=a,o=s/11;a.length>o&&(r=a.slice(0,o)+"..."),n.push({name:a,label:r,size:s,x:e}),e+=s}),n},groupedInterventions:function(){var t=[];return this.interventionGroups.forEach(function(e){t=t.concat(e.items)}),t}},mounted:function(){var t=this;window.addEventListener("scroll",function(){t.innerOffsetX=window.pageXOffset,t.innerOffsetY=window.pageYOffset})}},m=g,y=(n("ea80"),Object(f["a"])(m,r,o,!1,null,"68a58773",null));y.options.__file="ScrollingEvidenceTable.vue";var _=y.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{width:t.width+"px"},attrs:{id:"sidebar"}},[n("div",{staticClass:"section header"},[t._m(0),n("div",{staticClass:"description"},[t._m(1),t.showInfoText?n("div",[n("p",[t._v("Producing, using and applying the best available research is a critical element of the Alliance’s commitment to being an outcomes-driven and evidence-based organisation and is essential for us to deliver our programmes and influence policy effectively.")]),n("p",[t._v("This evidence map lets you explore the evidence generated by the Alliance on key HIV, health and rights interventions (horizontal axis) and outcomes (vertical axis).")]),t._m(2)]):t._e()]),n("div",{staticClass:"info-text-button",on:{click:t.toggleInfoText}},[t.showInfoText?n("span",[t._v("Hide")]):n("span",[t._v("More...")])])]),n("div",{staticClass:"heading"},[t._v("FILTER")]),n("FilterMenu",{attrs:{studies:t.studies,action:t.action,filters:t.filters}}),null!==t.selectedCell.intervention?n("div",{staticClass:"info"},[n("div",{staticClass:"section selected-intervention"},[n("div",{staticClass:"heading"},[t._v("SELECTED INTERVENTION")]),n("div",{staticClass:"content"},[t._v(t._s(t.selectedCell.intervention))])]),n("div",{staticClass:"section selected-outcome"},[n("div",{staticClass:"heading"},[t._v("SELECTED OUTCOME")]),n("div",{staticClass:"content"},[t._v(t._s(t.selectedCell.outcome))])]),n("div",{staticClass:"section"},[n("div",{class:{heading:!0,animated:t.emphasiseChange,infinite:t.emphasiseChange,flash:t.emphasiseChange}},[t._v("STUDIES ("+t._s(t.numFoundStudies)+" found)")]),n("div",{staticClass:"study-groups"},[n("StudyList",{attrs:{title:"Strong evidence (for)",ids:t.studyGroups.for.high,studiesLU:t.studiesLU}}),n("StudyList",{attrs:{title:"Moderate evidence (for)",ids:t.studyGroups.for.moderate,studiesLU:t.studiesLU}}),n("StudyList",{attrs:{title:"Low evidence (for)",ids:t.studyGroups.for.low,studiesLU:t.studiesLU}}),n("StudyList",{attrs:{title:"Strong evidence (against)",ids:t.studyGroups.against.high,studiesLU:t.studiesLU}}),n("StudyList",{attrs:{title:"Moderate evidence (against)",ids:t.studyGroups.against.moderate,studiesLU:t.studiesLU}}),n("StudyList",{attrs:{title:"Low evidence (against)",ids:t.studyGroups.against.low,studiesLU:t.studiesLU}})],1)])]):t._e()],1)},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner"},[n("img",{attrs:{src:"img/logo.svg"}}),n("h3",{},[t._v("International HIV and AIDS Alliance Evidence map of community action on HIV, health and rights")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("The "),n("a",{attrs:{href:"http://www.aidsalliance.org/"}},[t._v("International HIV/AIDS Alliance")]),t._v(" works with communities in over 40 countries to take local, national and global action on HIV, health and human rights.")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("For more information on how the map was created and how to use it, read the "),n("a",{attrs:{href:"docs/User Guide.pdf"}},[t._v("User Guide")]),t._v(". If you have questions please email: "),n("a",{attrs:{href:"mailto:evidencemap@aidsalliance.org"}},[t._v("evidencemap@aidsalliance.org")])])}],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"filter-menu"}},[n("div",[n("div",{staticClass:"filter",staticStyle:{width:"100%"}},[n("div",{staticClass:"label"},[t._v("Population")]),n("multiselect",{attrs:{options:t.populations,multiple:!0,searchable:!1,"hide-selected":!0,placeholder:"Select population(s)"},model:{value:t.filters.population,callback:function(e){t.$set(t.filters,"population",e)},expression:"filters.population"}})],1)]),n("div",{staticClass:"filter"},[n("div",{staticClass:"label"},[t._v("Country")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.countries,expression:"filters.countries"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"countries",e.target.multiple?n:n[0])}}},t._l(t.countries,function(e){return n("option",{key:e},[t._v(t._s(e))])}))]),n("div",{staticClass:"filter"},[n("div",{staticClass:"label"},[t._v("Internal / External")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.internalExternal,expression:"filters.internalExternal"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"internalExternal",e.target.multiple?n:n[0])}}},t._l(t.internalExternalTypes,function(e){return n("option",{key:e},[t._v(t._s(e))])}))]),n("div",{staticClass:"filter"},[n("div",{staticClass:"label"},[t._v("Strength of evidence")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.strengthOfEvidence,expression:"filters.strengthOfEvidence"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"strengthOfEvidence",e.target.multiple?n:n[0])}}},t._l(t.evidenceStrengths,function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(t._f("capitalize")(e)))])}))]),n("div",{staticClass:"filter"},[n("div",{staticClass:"label"},[t._v("For / against evidence")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.forAgainstEvidence,expression:"filters.forAgainstEvidence"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"forAgainstEvidence",e.target.multiple?n:n[0])}}},t._l(t.forAgainstEvidenceTypes,function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(t._f("capitalize")(e)))])}))]),n("div",{staticClass:"reset-button",on:{click:function(e){t.resetFilter()}}},[t._v("Reset filter")])])},w=[],E=(n("55dd"),n("eed6")),O=n.n(E),S=n("8e5f"),I=n.n(S),L={name:"FilterMenu",components:{Multiselect:I.a},props:{studies:Array,filters:Object,action:Function},data:function(){return{}},methods:{resetFilter:function(){this.action("resetFilter")}},computed:{countries:function(){var t=[];return this.studies.forEach(function(e){e.countries.forEach(function(e){""!==e&&t.push(e)})}),t=O()(t),t.sort(),t.unshift("All"),t},populations:function(){var t=[];return this.studies.forEach(function(e){e.population.forEach(function(e){""!==e&&t.push(e)})}),t=O()(t),t.sort(),t},studyTypes:function(){var t=O()(this.studies.map(function(t){return t.studyType}));return t.unshift("All"),t},internalExternalTypes:function(){return["All","Internal","External"]},evidenceStrengths:function(){var t=["All","low","moderate","high"];return t},forAgainstEvidenceTypes:function(){var t=["All","for","against"];return t}}},U=L,H=(n("60bc"),n("6506"),n("ce97"),Object(f["a"])(U,b,w,!1,null,"47f8a630",null));H.options.__file="FilterMenu.vue";var A=H.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.ids.length>0?n("div",{staticClass:"study-list"},[n("div",{staticClass:"dim",on:{click:t.handleClick}},[n("div",{staticClass:"heading noselect"},[n("span",[t.open?n("span",[t._v("-")]):n("span",[t._v("+")])]),n("span",[t._v(" "+t._s(t.title)+" "),n("span",{staticClass:"num-studies"},[t._v("("+t._s(t.ids.length)+" "),1===t.ids.length?n("span",[t._v("study")]):n("span",[t._v("studies")]),t._v(")")])])])]),t.open?n("div",{staticClass:"studies"},t._l(t.ids,function(e){return n("StudyDetail",{attrs:{study:t.studiesLU[e]}})})):t._e()]):t._e()},j=[],W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"study"},[n("div",{staticClass:"section title serif"},[t._v(t._s(t.study.title))]),n("div",{staticClass:"field"},[n("span",[t._v("Authors:")]),t._v(" "+t._s(t.study.authors))]),n("div",{staticClass:"field"},[n("span",[t._v("Organisations:")]),t._v(" "+t._s(t.study.orgsInvolved))]),n("div",{staticClass:"field"},[n("span",[t._v("Publication date:")]),t._v(" "+t._s(t.study.date))]),n("div",{staticClass:"summary serif"},[t.expanded?n("div",{domProps:{innerHTML:t._s(t.sanitisedSummary)}}):n("div",[n("span",{domProps:{innerHTML:t._s(t.sanitisedSummary.slice(0,200))}}),n("span",[t._v("...")])])]),t.expanded?n("div",{staticClass:"field"},[n("span",[t._v("Link:")]),n("a",{staticClass:"dim",attrs:{href:t.study.url,target:"_blank"}},[t._v(" "+t._s(t.study.url))])]):t._e(),t.expanded?n("div",{staticClass:"field"},[n("span",[t._v("Country:")]),t._v(" "+t._s(t.study.countries.join(", ")))]):t._e(),t.expanded?n("div",{staticClass:"field"},[n("span",[t._v("Population:")]),t._v(" "+t._s(t.study.population.join(", ")))]):t._e(),n("div",{staticClass:"expand-button noselect dim",on:{click:t.handleClick}},[t.expanded?n("span",[t._v("Less")]):n("span",[t._v("More")])])])},k=[],G=n("07d2"),M=n.n(G),F={name:"StudyDetail",props:{study:Object},data:function(){return{expanded:!1}},methods:{handleClick:function(){this.expanded=!this.expanded}},computed:{sanitisedSummary:function(){return M()(this.study.summary,["p","a"])}}},P=F,$=(n("963f"),Object(f["a"])(P,W,k,!1,null,"1a31b004",null));$.options.__file="StudyDetail.vue";var z=$.exports,N={name:"StudyList",components:{StudyDetail:z},props:{title:String,ids:Array,studiesLU:Array},data:function(){return{open:!1}},methods:{handleClick:function(){this.open=!this.open}}},B=N,D=(n("af37"),Object(f["a"])(B,T,j,!1,null,"47900622",null));D.options.__file="StudyList.vue";var Y=D.exports,R={name:"Sidebar",components:{FilterMenu:A,StudyList:Y},props:{width:Number,outcomeInterventionLU:Object,selectedCell:Object,studiesLU:Array,studies:Array,filters:Object,emphasiseChange:Boolean,action:Function},data:function(){return{showInfoText:!1}},computed:{studyGroups:function(){return this.outcomeInterventionLU[this.selectedCell.outcome][this.selectedCell.intervention]},numFoundStudies:function(){var t=this.studyGroups.for.high.length+this.studyGroups.for.moderate.length+this.studyGroups.for.low.length+this.studyGroups.against.high.length+this.studyGroups.against.moderate.length+this.studyGroups.against.low.length;return t}},methods:{toggleInfoText:function(){this.showInfoText=!this.showInfoText}}},V=R,X=(n("da6b"),Object(f["a"])(V,C,x,!1,null,"0acd7443",null));X.options.__file="Sidebar.vue";var q=X.exports,J=n("0d16"),Z=n("9380"),K=n.n(Z),Q=(n("28a5"),n("8a30")),tt=n.n(Q),et=n("d173"),nt=n.n(et);function it(t){var e=t.map(function(t){return t.Outcome});return e}function st(t){var e=t.map(function(t){return t.Intervention});return e}function at(t){var e={};return t.forEach(function(t){e[t.Code]=t.Outcome}),e}function rt(t){var e={};return t.forEach(function(t){e[t.Code]=t.Intervention}),e}function ot(t,e,n){var i=[],s=rt(t),a=at(e);return n.forEach(function(t,e){var n={id:e,title:t.Title,summary:t.Summary,orgsInvolved:t["Orgs involved"],date:t.Date,url:t.Link,forAgainstEvidence:"Y"===t["Evidence against the intervention?"][0].toUpperCase()?"against":"for",strengthOfEvidence:t["Strength of Evidence"].toLowerCase(),internalExternal:"IN"===t["Internal / External"].toUpperCase().slice(0,2)?"Internal":"EX"===t["Internal / External"].toUpperCase().slice(0,2)?"External":"Unknown"},r=t.Population.split(";");r=r.map(function(t){return t.trim()}),n.population=r;var o=t.Country.split(";");o=o.map(function(t){return t.trim()}),n.countries=o;var l=t.Interventions.split(";");l=l.map(function(t){return s[+t]}),n.interventions=l;var c=t.Outcomes.split(";");c=c.map(function(t){return a[+t]}),n.outcomes=c,i.push(n)}),i}function lt(t){var e=[];return t.forEach(function(t){e[t.id]=t}),e}function ct(t,e,n){var i={};return e.forEach(function(e){i[e]={},t.forEach(function(t){i[e][t]={for:{low:[],moderate:[],high:[]},against:{low:[],moderate:[],high:[]}}})}),n.forEach(function(t){var e="against"===t.forAgainstEvidence,n=t.strengthOfEvidence;t.outcomes.forEach(function(s){t.interventions.forEach(function(a){e?i[s][a].against[n].push(t.id):i[s][a].for[n].push(t.id)})})}),i}function ut(t){var e=t.map(function(t){return t.Category});e=O()(e);var n=[];return e.forEach(function(e){var i={name:e,items:[]},s=K()(t,function(t){return t.Category===e});s.forEach(function(t){i.items.push(t.Outcome)}),i.size=i.items.length,n.push(i)}),n}function dt(t){var e=t.map(function(t){return t.Category});e=O()(e);var n=[];return e.forEach(function(e){var i={name:e,items:[]},s=K()(t,function(t){return t.Category===e});s.forEach(function(t){i.items.push(t.Intervention)}),i.size=i.items.length,n.push(i)}),n}function ht(t,e,n){var i=0;return e.forEach(function(e){t.forEach(function(t){var s=n[e][t],a=Math.max(s.for.high.length,s.for.moderate.length,s.for.low.length,s.against.high.length,s.against.moderate.length,s.against.low.length);a>i&&(i=a)})}),i}function ft(t,e){var n=K()(t,function(t){var n=!0;return e.filterIds.forEach(function(i){"All"===e[i]||"population"===i&&0===e.population.length||("population"===i?0===nt()(t.population,e.population).length&&(n=!1):"countries"===i?tt()(t[i],e[i])||(n=!1):t[i]!==e[i]&&(n=!1))}),n});return n}var vt={name:"app",components:{Sidebar:q,ScrollingEvidenceTable:_},data:function(){return{outcomes:[],outcomeGroups:[],interventions:[],interventionGroups:[],studies:[],studiesLU:[],outcomeInterventionLU:{},maxStudies:0,sidebarWidth:400,selectedCell:{intervention:null,outcome:null},emphasiseChange:!1,filters:{filterIds:["countries","population","internalExternal","strengthOfEvidence","forAgainstEvidence"],filterType:["single","multi","single","single","single"],countries:"All",population:[],internalExternal:"All",strengthOfEvidence:"All",forAgainstEvidence:"All"}}},mounted:function(){var t=this;Object(J["a"])("data/interventions.csv?3",function(e,n){Object(J["a"])("data/outcomes.csv?3",function(e,i){Object(J["a"])("data/evidence-map.csv?3",function(e,s){n=K()(n,function(t){return t.Intervention}),i=K()(i,function(t){return t.Outcome}),s=K()(s,function(t){return t.Title}),s=K()(s,function(t){return t.Eligibility&&"Y"===t.Eligibility[0].toUpperCase()}),t.outcomes=it(i),t.outcomeGroups=ut(i),t.interventions=st(n),t.interventionGroups=dt(n),t.studies=ot(n,i,s),t.studiesLU=lt(t.studies),t.outcomeInterventionLU=ct(t.interventions,t.outcomes,t.studies),t.maxStudies=ht(t.interventions,t.outcomes,t.outcomeInterventionLU)})})})},computed:{filteredOutcomeInterventionLU:function(){var t=ft(this.studies,this.filters);return ct(this.interventions,this.outcomes,t)}},methods:{action:function(t,e){var n=this;switch(t){case"selectCell":this.selectedCell=e,this.setEmphasiseChange();break;case"resetFilter":this.filters.filterIds.forEach(function(t,e){return n.filters[t]="single"===n.filters.filterType[e]?"All":[]});break;default:console.log("Unknown action",t)}},setEmphasiseChange:function(){var t=this;this.emphasiseChange=!0,window.setTimeout(function(){t.emphasiseChange=!1},3e3)}},watch:{filters:{handler:function(){this.setEmphasiseChange()},deep:!0}}},pt=vt,gt=(n("034f"),Object(f["a"])(pt,s,a,!1,null,null,null));gt.options.__file="App.vue";var mt=gt.exports;i["a"].config.productionTip=!1,i["a"].filter("capitalize",function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""}),new i["a"]({render:function(t){return t(mt)}}).$mount("#app")},"64a9":function(t,e,n){},6506:function(t,e,n){"use strict";var i=n("8acf"),s=n.n(i);s.a},7624:function(t,e,n){},7851:function(t,e,n){},"8acf":function(t,e,n){},"963f":function(t,e,n){"use strict";var i=n("7851"),s=n.n(i);s.a},a6cb:function(t,e,n){},af37:function(t,e,n){"use strict";var i=n("3b9b"),s=n.n(i);s.a},ce97:function(t,e,n){"use strict";var i=n("a6cb"),s=n.n(i);s.a},da6b:function(t,e,n){"use strict";var i=n("7624"),s=n.n(i);s.a},e4c0:function(t,e,n){},ea80:function(t,e,n){"use strict";var i=n("e4c0"),s=n.n(i);s.a},ee6e:function(t,e,n){}});
//# sourceMappingURL=app.c9accfa9.js.map